<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 68net : A Modern SCSI2Ethernet Board - Part 1 | Ronan Gaillard</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="68net : A Modern SCSI2Ethernet Board - Part 1" />
<meta property="og:description" content="Want to discuss about this project ? Go here !
Introduction I had been looking to connect my SE/30 to the internet but I struggled to find PDS boards that would fit in it. It is particularly difficult as such boards are rare, but there is also very little space available in the SE/30, so most cards won&rsquo;t fit in. Apart from the internal PDS port the SE/30 has another expansion port : SCSI, which is an improved parallel port." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/68net-a-modern-scsi2ethernet-board-part1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-10T10:30:29+01:00" />
<meta property="article:modified_time" content="2020-11-10T10:30:29+01:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="68net : A Modern SCSI2Ethernet Board - Part 1"/>
<meta name="twitter:description" content="Want to discuss about this project ? Go here !
Introduction I had been looking to connect my SE/30 to the internet but I struggled to find PDS boards that would fit in it. It is particularly difficult as such boards are rare, but there is also very little space available in the SE/30, so most cards won&rsquo;t fit in. Apart from the internal PDS port the SE/30 has another expansion port : SCSI, which is an improved parallel port."/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/style-classic.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-181304069-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
  

</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/my-mac-se30-is-back-alive/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&text=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&is_video=false&description=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201&body=Check out this article: %2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&name=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201&description=Want%20to%20discuss%20about%20this%20project%20%3f%20Go%20here%20%21%0aIntroduction%20I%20had%20been%20looking%20to%20connect%20my%20SE%2f30%20to%20the%20internet%20but%20I%20struggled%20to%20find%20PDS%20boards%20that%20would%20fit%20in%20it.%20It%20is%20particularly%20difficult%20as%20such%20boards%20are%20rare%2c%20but%20there%20is%20also%20very%20little%20space%20available%20in%20the%20SE%2f30%2c%20so%20most%20cards%20won%26rsquo%3bt%20fit%20in.%20Apart%20from%20the%20internal%20PDS%20port%20the%20SE%2f30%20has%20another%20expansion%20port%20%3a%20SCSI%2c%20which%20is%20an%20improved%20parallel%20port.">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&t=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#next-steps">Next steps</a></li>
      </ul>
    </li>
    <li><a href="#on-the-technical-side">On The Technical Side</a></li>
  </ul>
</nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        68net : A Modern SCSI2Ethernet Board - Part 1
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-11-10 10:30:29 &#43;0100 &#43;0100" itemprop="datePublished">2020-11-10</time>
          
        </div>
        
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <p><em>Want to discuss about this project ? <a href="https://68kmla.org/forums/topic/61287-68net-a-modern-scsi-to-ethernet-board/" target="_blank">Go here !</a></em></p>
<h2 id="introduction">Introduction</h2>
<p>I had been looking to connect my SE/30 to the internet but I struggled to find PDS boards that would fit in it. It is particularly difficult as such boards are rare, but there is also very little space available in the SE/30, so most cards won&rsquo;t fit in. Apart from the internal PDS port the SE/30 has another expansion port : SCSI, which is an improved parallel port. It is available at the back of the computer as a DB25 port. But all SCSI to Ethernet devices from back in the days that I found were missing floppies with drivers. Moreover most of this stuff was in the US so shipping would be really expensive. Then I found about <a href="https://68kmla.org/forums/topic/58413-scsi-to-ethernet-adapter-on-new-hardware/" target="_blank">scuznet</a>, a modern design by @saybur. It was really interesting because it was made to work with an unpatched Nuvotech driver. But there was a few things I did want to change/improve to the design, including the fact that it would be really cool to be able to upgrade the firmware by USB so that the community could easily develop and upgrade the firmware.</p>
<p>The goals of this project is to make a cheap, open source, community driven, and reliable board.</p>
<p>This is the original design by @saybur :
<img src="/img/scuznet.jpg" alt="scuznet"></p>
<p>So I decided to create a new design based on this. Here are the main things I changed/added to the original design :</p>
<ul>
<li>The microcontroller is replaced by a STM32 (ARM chip) that will be upgradable by USB. In the future it also means a firmware could handle Ethernet over USB, and you could share files between your modern computer just by connecting to you vintage mac by USB;</li>
<li>The board is self powered by the SCSI</li>
<li>In case external power is needed (such as on the Macintosh Plus I guess) it can be provided by USB (instead of a power jack on the original design)</li>
<li>I added mouting holes to the PCB so that we can design an acrylic case later;</li>
<li>I removed the SD Card slot because I like things that does a simple task but does it well (Good design is as little design as possible)</li>
<li>Designed in Kicad 5 (instead of Kicad 4)</li>
</ul>
<p>On my design, power can be provided by the SCSI bus or/and the USB port. The board has some circuitry that automatically switches between these two sources, so for the end user it is really convenient. On a Mac that has a stable SCSI 5V you just have to plug the board, on other Macs plug the board and connect the USB port to a USB wall charger and that&rsquo;s it. It also means the board can be connected to the turned on Mac while updating the firmware, which will also be super convenient while developing a new firmware.</p>
<p>SCSI Termination is for the moment always enabled, I do not see this as an issue. If I discover that it should be software controlled I will tweak the design in the future.</p>
<p>Here is what the final board could look like :
<img src="/img/68net-render.png" alt="68net render"></p>
<p>That design is available on my <a href="https://github.com/ronangaillard/68net" target="_blank">GitHub</a>.</p>
<h3 id="next-steps">Next steps</h3>
<ul>
<li>Wait for some feedbacks and eventually tweak a bit the current design <em>(~1 week)</em></li>
<li>Manufacture some boards and assemble them <em>(~1 month as boards will get manufactured in China)</em></li>
<li>Write an initial firmware and make sure design works as expected <em>(~1 week to get basic stuff running)</em></li>
<li>Port the Nuvotech protocol to the board (and find a way to make it work with A/UX if time is found) <em>(timing depends on so much things)</em></li>
<li>Try to distribute the board as a kit or pre-assembled <em>(timing depends on so much things)</em></li>
</ul>
<h2 id="on-the-technical-side">On The Technical Side</h2>
<p>Schematics are available <a href="/68net-schematics-rev-0.pdf">here</a> (may not be up to date, check on my <a href="https://github.com/ronangaillard/68net" target="_blank">GitHub</a> for latest content).</p>
<p>The design is based around an STM32F072R8, for three main reasons :</p>
<ul>
<li>it&rsquo;s an ARM chip, so development tools are open source and powerful (and I have experience with STM32 as well)</li>
<li>it has an USB DFU bootloader, so any end-user will be able to upgrade the board without expensive hardware flashing tool</li>
<li>it has a lot of GPIOs that is necessary to talk using SCSI</li>
</ul>
<p>The signals between the STM32 and the SCSI are divided into three main categories :</p>
<ul>
<li>SCSI -&gt; STM32 (ATN, ACK, &hellip;) : these are unidirectional signals from initiator, I use a 74LVC14 chip to do the level conversion. Indeed the SCSI bus communicates at 2.85V but some peripherals can talk at 5.5V, so we need to protect the STM32 which does not have a lot of 5V tolerant GPIOS.</li>
</ul>
<p><img src="/img/68net-74lvc14-small.png" alt="74lvc14"></p>
<ul>
<li>STM32 -&gt; SCSI (CD, IO, &hellip;) : these are unidirectional signals from target, I use multiple 74LVTH126 to drive these control pins in Open Drain, this make sure no device on the bus can be damaged in case of multiple devices talking at the same time. This also make sure the board talks at the 2.85V SCSI voltage.</li>
</ul>
<p><img src="/img/68net-74lvth126.png" alt="74lvth126"></p>
<ul>
<li>STM32 &lt;-&gt; SCSI : bidirectional signals that will use the 74LVTH126 and the 74LVC14. One particularity is the data lines. You may have noticed that the 74LVC14 inverts the signal logic. This is not an issue for control lines, as software can handle inverted signal with simple <code>not</code>. The problem for the data lines is that you often want to transfer the data received as quickly as possible to your peripheral (here the Ethernet chip). If you want to be fast you don&rsquo;t want to <code>not</code> all received data before transfering, that&rsquo;s why you&rsquo;ll see the 74LVC245 chip handling the received data line that does the level convert without inverting the data.</li>
</ul>
<p><img src="/img/68net-74lvc245.png" alt="74lvc245"></p>
<p>You may now wonder where does the 2.85V comes from. I use a simple adjustable LM1117 to generate it, but you may notice that it produces something more like 2.63V. It is due to the fact that termination resistors (<code>RN1</code> and <code>RN2</code>) are supposed to be 110ohms, but 110ohms resistor networks are not available at the time of writing on DigiKey. So I chose the nearest available value which is 100ohms, and for that value the voltage should be 2.63V. (and yes SCSI devices need a termination to avoid reflection).</p>
<p>The rest is relatively classical design, the STM32 is connected to the Ethernet chip <code>ENC28J60</code> by SPI. You can also notice the two schottky diodes managing the input voltage (USB and SCSI TRMPWRP) with a low lost voltage.</p>
<p>Don&rsquo;t hesitate to give some feedback <a href="%28https://68kmla.org/forums/topic/61287-68net-a-modern-scsi-to-ethernet-board/%29">here</a> !</p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#next-steps">Next steps</a></li>
      </ul>
    </li>
    <li><a href="#on-the-technical-side">On The Technical Side</a></li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&text=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&is_video=false&description=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201&body=Check out this article: %2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&title=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&name=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201&description=Want%20to%20discuss%20about%20this%20project%20%3f%20Go%20here%20%21%0aIntroduction%20I%20had%20been%20looking%20to%20connect%20my%20SE%2f30%20to%20the%20internet%20but%20I%20struggled%20to%20find%20PDS%20boards%20that%20would%20fit%20in%20it.%20It%20is%20particularly%20difficult%20as%20such%20boards%20are%20rare%2c%20but%20there%20is%20also%20very%20little%20space%20available%20in%20the%20SE%2f30%2c%20so%20most%20cards%20won%26rsquo%3bt%20fit%20in.%20Apart%20from%20the%20internal%20PDS%20port%20the%20SE%2f30%20has%20another%20expansion%20port%20%3a%20SCSI%2c%20which%20is%20an%20improved%20parallel%20port.">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f68net-a-modern-scsi2ethernet-board-part1%2f&t=68net%20%3a%20A%20Modern%20SCSI2Ethernet%20Board%20-%20Part%201">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Ronan Gaillard 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>



</html>
